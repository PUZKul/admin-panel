{"ast":null,"code":"var _jsxFileName = \"/home/szymon/College/PUZ-Biblioteka/Admin-Panel/admin-panel/admin-panel/src/components/login/Login.jsx\";\nimport React, { Component } from 'react';\nimport './login.css';\nimport { Route, withRouter } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      // prefix: \"https://puz-biblioteka.herokuapp.com\",\n      username: \"\",\n      password: \"\",\n      error: false,\n      message: \"\"\n    };\n\n    this.usernameHandler = name => {\n      this.setState({\n        username: name.target.value\n      });\n    };\n\n    this.passwordHandler = pass => {\n      this.setState({\n        password: pass.target.value\n      });\n    };\n\n    this.submitHandler = e => {\n      e.preventDefault();\n      let username = this.state.username;\n      let password = this.state.password;\n      let loginObject = {\n        username,\n        password\n      };\n      var errorFlag = false;\n      fetch(this.props.prefix + '/login', {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(loginObject)\n      }).then(response => {\n        if (response.status === 200) {\n          const token = response.headers.get(\"authorization\");\n          this.props.setToken(token);\n          this.setState({\n            error: false,\n            message: \"\"\n          });\n          this.goBack();\n        } else if (response.status === 401) {\n          this.setState({\n            error: true,\n            message: \"Login failed!\"\n          });\n        }\n      });\n    };\n\n    this.goBack = () => {\n      this.props.history.push('/');\n    };\n  }\n\n  render() {\n    const {\n      message,\n      username,\n      password\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"login-container \",\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"card card-body login-card\",\n        onSubmit: this.submitHandler,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"usernameInput1\",\n            className: \"form-label\",\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            id: \"usernameInput1\",\n            placeholder: \"username\",\n            value: username,\n            onChange: this.usernameHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"passwordInput1\",\n            className: \"form-label\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            className: \"form-control\",\n            id: \"passwordInput1\",\n            placeholder: \"Password\",\n            value: password,\n            onChange: this.passwordHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          children: \"Sign in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-center\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(Login);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/home/szymon/College/PUZ-Biblioteka/Admin-Panel/admin-panel/admin-panel/src/components/login/Login.jsx"],"names":["React","Component","Route","withRouter","Login","state","username","password","error","message","usernameHandler","name","setState","target","value","passwordHandler","pass","submitHandler","e","preventDefault","loginObject","errorFlag","fetch","props","prefix","method","headers","body","JSON","stringify","then","response","status","token","get","setToken","goBack","history","push","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './login.css';\nimport { Route , withRouter} from 'react-router-dom';\n\nclass Login extends Component {\n    state = { \n       // prefix: \"https://puz-biblioteka.herokuapp.com\",\n        username: \"\",\n        password: \"\",\n        error: false,\n        message: \"\"\n     }\n\n    usernameHandler = (name) =>{\n        this.setState({username: name.target.value});\n    }\n\n    passwordHandler = (pass) =>{\n        this.setState({password: pass.target.value});\n    }\n\n    submitHandler = (e) => {\n        e.preventDefault();\n        let username = this.state.username;\n        let password = this.state.password;\n        let loginObject = {username, password};\n        var errorFlag = false;\n\n        fetch(this.props.prefix + '/login',  {\n            method: 'POST',\n            headers: {\"Content-Type\": \"application/json\"},\n           body: JSON.stringify(loginObject) \n          })\n          .then(response => {\n              if(response.status === 200){\n                const token = response.headers.get(\"authorization\")\n                this.props.setToken(token);\n                this.setState({error: false, message: \"\"})\n                this.goBack();\n              }\n              else if(response.status === 401){\n                  this.setState({error: true, message: \"Login failed!\"});\n              }\n            \n          });\n      }\n\n      goBack = () => {\n        this.props.history.push('/');\n      }\n\n    render() { \n        const {message, username, password} = this.state;\n        return ( \n            <section className=\"login-container \">\n            <form className=\"card card-body login-card\" onSubmit={this.submitHandler}>\n                <div className=\"mb-3\">\n                    <label for=\"usernameInput1\" className=\"form-label\">Username</label>\n                    <input type=\"text\" className=\"form-control\" id=\"usernameInput1\" placeholder=\"username\"  value={username} onChange={this.usernameHandler}/>\n                </div>\n                <div className=\"mb-3\">\n                    <label for=\"passwordInput1\" className=\"form-label\">Password</label>\n                    <input type=\"password\" className=\"form-control\" id=\"passwordInput1\" placeholder=\"Password\" value={password} onChange={this.passwordHandler}/>\n                </div>\n                <button type=\"submit\" className=\"btn btn-primary\">Sign in</button>\n            </form>\n            <h3 className=\"text-center\">{message}</h3>\n          </section>\n         );\n    }\n}\n \nexport default withRouter(Login);"]},"metadata":{},"sourceType":"module"}