{"ast":null,"code":"import _classCallCheck from\"/home/szymon/College/PUZ-Biblioteka/Admin-Panel/admin-panel/admin-panel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/szymon/College/PUZ-Biblioteka/Admin-Panel/admin-panel/admin-panel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/szymon/College/PUZ-Biblioteka/Admin-Panel/admin-panel/admin-panel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/szymon/College/PUZ-Biblioteka/Admin-Panel/admin-panel/admin-panel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./login.css';import{withRouter}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={// prefix: \"https://puz-biblioteka.herokuapp.com\",\nusername:\"\",password:\"\",error:false,message:\"\"};_this.usernameHandler=function(name){_this.setState({username:name.target.value});};_this.passwordHandler=function(pass){_this.setState({password:pass.target.value});};_this.submitHandler=function(e){e.preventDefault();var username=_this.state.username;var password=_this.state.password;var loginObject={username:username,password:password};fetch(_this.props.prefix+'/login',{method:'POST',headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(loginObject)}).then(function(response){if(response.status===200){var token=response.headers.get(\"authorization\");_this.props.setToken(token);_this.setState({error:false,message:\"\"});_this.goBack();}else if(response.status===401){_this.setState({error:true,message:\"Login failed!\"});}});};_this.goBack=function(){_this.props.history.push('/');};return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this$state=this.state,message=_this$state.message,username=_this$state.username,password=_this$state.password;return/*#__PURE__*/_jsxs(\"section\",{className:\"login-container \",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"card card-body login-card\",onSubmit:this.submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"usernameInput1\",className:\"form-label\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"usernameInput1\",placeholder:\"username\",value:username,onChange:this.usernameHandler})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"passwordInput1\",className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"passwordInput1\",placeholder:\"Password\",value:password,onChange:this.passwordHandler})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Sign in\"})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-center mt-2 text-danger\",children:message})]});}}]);return Login;}(Component);export default withRouter(Login);","map":{"version":3,"sources":["/home/szymon/College/PUZ-Biblioteka/Admin-Panel/admin-panel/admin-panel/src/components/login/Login.jsx"],"names":["React","Component","withRouter","Login","state","username","password","error","message","usernameHandler","name","setState","target","value","passwordHandler","pass","submitHandler","e","preventDefault","loginObject","fetch","props","prefix","method","headers","body","JSON","stringify","then","response","status","token","get","setToken","goBack","history","push"],"mappings":"wuBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,aAAP,CACA,OAAQC,UAAR,KAAyB,kBAAzB,C,2FAEMC,CAAAA,K,uTACFC,K,CAAQ,CACL;AACCC,QAAQ,CAAE,EAFN,CAGJC,QAAQ,CAAE,EAHN,CAIJC,KAAK,CAAE,KAJH,CAKJC,OAAO,CAAE,EALL,C,OAQRC,e,CAAkB,SAACC,IAAD,CAAS,CACvB,MAAKC,QAAL,CAAc,CAACN,QAAQ,CAAEK,IAAI,CAACE,MAAL,CAAYC,KAAvB,CAAd,EACH,C,OAEDC,e,CAAkB,SAACC,IAAD,CAAS,CACvB,MAAKJ,QAAL,CAAc,CAACL,QAAQ,CAAES,IAAI,CAACH,MAAL,CAAYC,KAAvB,CAAd,EACH,C,OAEDG,a,CAAgB,SAACC,CAAD,CAAO,CACnBA,CAAC,CAACC,cAAF,GACA,GAAIb,CAAAA,QAAQ,CAAG,MAAKD,KAAL,CAAWC,QAA1B,CACA,GAAIC,CAAAA,QAAQ,CAAG,MAAKF,KAAL,CAAWE,QAA1B,CACA,GAAIa,CAAAA,WAAW,CAAG,CAACd,QAAQ,CAARA,QAAD,CAAWC,QAAQ,CAARA,QAAX,CAAlB,CAEAc,KAAK,CAAC,MAAKC,KAAL,CAAWC,MAAX,CAAoB,QAArB,CAAgC,CACjCC,MAAM,CAAE,MADyB,CAEjCC,OAAO,CAAE,CAAC,eAAgB,kBAAjB,CAFwB,CAGlCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeR,WAAf,CAH4B,CAAhC,CAAL,CAKGS,IALH,CAKQ,SAAAC,QAAQ,CAAI,CACd,GAAGA,QAAQ,CAACC,MAAT,GAAoB,GAAvB,CAA2B,CACzB,GAAMC,CAAAA,KAAK,CAAGF,QAAQ,CAACL,OAAT,CAAiBQ,GAAjB,CAAqB,eAArB,CAAd,CACA,MAAKX,KAAL,CAAWY,QAAX,CAAoBF,KAApB,EACA,MAAKpB,QAAL,CAAc,CAACJ,KAAK,CAAE,KAAR,CAAeC,OAAO,CAAE,EAAxB,CAAd,EACA,MAAK0B,MAAL,GACD,CALD,IAMK,IAAGL,QAAQ,CAACC,MAAT,GAAoB,GAAvB,CAA2B,CAC5B,MAAKnB,QAAL,CAAc,CAACJ,KAAK,CAAE,IAAR,CAAcC,OAAO,CAAE,eAAvB,CAAd,EACH,CAEJ,CAhBH,EAiBD,C,OAED0B,M,CAAS,UAAM,CACb,MAAKb,KAAL,CAAWc,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB,EACD,C,uDAEH,iBAAS,iBACiC,KAAKhC,KADtC,CACEI,OADF,aACEA,OADF,CACWH,QADX,aACWA,QADX,CACqBC,QADrB,aACqBA,QADrB,CAEL,mBACI,iBAAS,SAAS,CAAC,kBAAnB,wBACA,cAAM,SAAS,CAAC,2BAAhB,CAA4C,QAAQ,CAAE,KAAKU,aAA3D,wBACI,aAAK,SAAS,CAAC,MAAf,wBACI,cAAO,GAAG,CAAC,gBAAX,CAA4B,SAAS,CAAC,YAAtC,sBADJ,cAEI,cAAO,IAAI,CAAC,MAAZ,CAAmB,SAAS,CAAC,cAA7B,CAA4C,EAAE,CAAC,gBAA/C,CAAgE,WAAW,CAAC,UAA5E,CAAwF,KAAK,CAAEX,QAA/F,CAAyG,QAAQ,CAAE,KAAKI,eAAxH,EAFJ,GADJ,cAKI,aAAK,SAAS,CAAC,MAAf,wBACI,cAAO,GAAG,CAAC,gBAAX,CAA4B,SAAS,CAAC,YAAtC,sBADJ,cAEI,cAAO,IAAI,CAAC,UAAZ,CAAuB,SAAS,CAAC,cAAjC,CAAgD,EAAE,CAAC,gBAAnD,CAAoE,WAAW,CAAC,UAAhF,CAA2F,KAAK,CAAEH,QAAlG,CAA4G,QAAQ,CAAE,KAAKQ,eAA3H,EAFJ,GALJ,cASI,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,iBAAhC,qBATJ,GADA,cAYA,WAAI,SAAS,CAAC,8BAAd,UAA8CN,OAA9C,EAZA,GADJ,CAgBH,C,mBAhEeP,S,EAmEpB,cAAeC,CAAAA,UAAU,CAACC,KAAD,CAAzB","sourcesContent":["import React, { Component } from 'react';\nimport './login.css';\nimport {withRouter} from 'react-router-dom';\n\nclass Login extends Component {\n    state = { \n       // prefix: \"https://puz-biblioteka.herokuapp.com\",\n        username: \"\",\n        password: \"\",\n        error: false,\n        message: \"\"\n     }\n\n    usernameHandler = (name) =>{\n        this.setState({username: name.target.value});\n    }\n\n    passwordHandler = (pass) =>{\n        this.setState({password: pass.target.value});\n    }\n\n    submitHandler = (e) => {\n        e.preventDefault();\n        let username = this.state.username;\n        let password = this.state.password;\n        let loginObject = {username, password};\n\n        fetch(this.props.prefix + '/login',  {\n            method: 'POST',\n            headers: {\"Content-Type\": \"application/json\"},\n           body: JSON.stringify(loginObject) \n          })\n          .then(response => {\n              if(response.status === 200){\n                const token = response.headers.get(\"authorization\")\n                this.props.setToken(token);\n                this.setState({error: false, message: \"\"})\n                this.goBack();\n              }\n              else if(response.status === 401){\n                  this.setState({error: true, message: \"Login failed!\"});\n              }\n            \n          });\n      }\n\n      goBack = () => {\n        this.props.history.push('/');\n      }\n\n    render() { \n        const {message, username, password} = this.state;\n        return ( \n            <section className=\"login-container \">\n            <form className=\"card card-body login-card\" onSubmit={this.submitHandler}>\n                <div className=\"mb-3\">\n                    <label for=\"usernameInput1\" className=\"form-label\">Username</label>\n                    <input type=\"text\" className=\"form-control\" id=\"usernameInput1\" placeholder=\"username\"  value={username} onChange={this.usernameHandler}/>\n                </div>\n                <div className=\"mb-3\">\n                    <label for=\"passwordInput1\" className=\"form-label\">Password</label>\n                    <input type=\"password\" className=\"form-control\" id=\"passwordInput1\" placeholder=\"Password\" value={password} onChange={this.passwordHandler}/>\n                </div>\n                <button type=\"submit\" className=\"btn btn-primary\">Sign in</button>\n            </form>\n            <h3 className=\"text-center mt-2 text-danger\">{message}</h3>\n          </section>\n         );\n    }\n}\n \nexport default withRouter(Login);"]},"metadata":{},"sourceType":"module"}