{"ast":null,"code":"import _defineProperty from\"/home/szymon/College/PUZ-Biblioteka/Admin-Panel/admin-panel/admin-panel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/szymon/College/PUZ-Biblioteka/Admin-Panel/admin-panel/admin-panel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/szymon/College/PUZ-Biblioteka/Admin-Panel/admin-panel/admin-panel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/szymon/College/PUZ-Biblioteka/Admin-Panel/admin-panel/admin-panel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/szymon/College/PUZ-Biblioteka/Admin-Panel/admin-panel/admin-panel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{NavLink}from'react-router-dom';import{withRouter}from'react-router-dom';import{Dropdown}from'semantic-ui-react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditUser=/*#__PURE__*/function(_Component){_inherits(EditUser,_Component);var _super=_createSuper(EditUser);function EditUser(){var _this;_classCallCheck(this,EditUser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={id:\"\",email:\"\",firstName:\"\",lastName:\"\",address:\"\",phone:\"\",bookLimit:3,notFound:false,errorMessage:\"\",user:null};_this.fetchUser=function(id){fetch(_this.props.prefix+\"/api/library/admins/users/\".concat(id),{method:'GET',headers:{\"Content-Type\":\"application/json\",\"Authorization\":_this.props.getToken()}}).then(function(res){return res.json();}).then(function(res){console.log(res);if(res.status===404){_this.setState({notFound:true,errorMessage:res.message});}else{_this.setState({user:\"asda\",notFound:false,ready:true});//this.setState({user: res, notFound: false, ready: true, id: res.id, email: res.email, comment: res.comment, firstName: res.firstName, lastName: res.lastName, address: res.address, phone: res.phone, bookLimit: res.maxBooks});\n}});};_this.edit=function(){console.log(\"here\");console.log(_this.getEditUserObject());fetch(\"\".concat(_this.props.prefix,\"/api/library/admins/users/edit/\").concat(_this.state.user.username),{method:'POST',body:JSON.stringify(_this.getEditUserObject()),headers:{\"Content-Type\":\"application/json\",\"Authorization\":_this.props.getToken()}}).then(function(res){if(res.status===200){alert(\"Data changed successfully\");}});};_this.increaseLimit=function(){fetch(\"\".concat(_this.props.prefix,\"/api/library/admins/users/\").concat(_this.state.user.username,\"/bookLimit\"),{method:'POST',body:JSON.stringify(_this.getEditLimitObject()),headers:{\"Content-Type\":\"application/json\",\"Authorization\":_this.props.getToken()}}).then(function(res){if(res.status===200){alert(\"Limit changed successfully\");}});};_this.getEditUserObject=function(){var firstName=_this.state.firstName===_this.state.user.firstName?\"\":_this.state.firstName;var lastName=_this.state.lastName===_this.state.user.lastName?\"\":_this.state.lastName;var phone=_this.state.phone===_this.state.user.phone?\"\":_this.state.phone;var address=_this.state.address===_this.state.user.address?\"\":_this.state.address;var email=_this.state.email===_this.state.user.email?\"\":_this.state.email;var comment=_this.state.comment===_this.state.user.comment?\"\":_this.state.comment;return{firstName:firstName,lastName:lastName,phone:phone,address:address,email:email,comment:comment};};_this.getEditLimitObject=function(){var limit=_this.state.bookLimit<1?3:_this.state.bookLimit;return{limit:limit};};_this.dataHandler=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.filterByUsername=function(e){e.preventDefault();_this.fetchBorrow(0,10,_this.state.username);};_this.myFunction=function(){document.getElementById(\"myDropdown\").classList.toggle(\"show\");};_this.goBack=function(){_this.props.history.push('/users');};return _this;}_createClass(EditUser,[{key:\"componentDidMount\",value:function componentDidMount(){var url=this.props.location.pathname;var array=url.split('/');var _id=array[array.length-1];this.fetchUser(_id);this.setState({id:_id});}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,user=_this$state.user,notFound=_this$state.notFound,errorMessage=_this$state.errorMessage,firstName=_this$state.firstName,lastName=_this$state.lastName,phone=_this$state.phone,address=_this$state.address,comment=_this$state.comment,email=_this$state.email,bookLimit=_this$state.bookLimit;if(user===null&&notFound===false){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}else if(notFound===true){return/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"b\",{children:errorMessage})})});}return/*#__PURE__*/_jsxs(\"section\",{className:\"\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Edit \",/*#__PURE__*/_jsxs(\"b\",{children:[\" \",user.username,\" \"]}),\" account\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"card mt-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group input-group-sm mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-group-prepend edit-icon\",children:/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",id:\"inputGroup-sizing-sm\",children:\"First name\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"firstName\",className:\"form-control\",value:firstName,\"aria-label\":\"Small\",onChange:this.dataHandler,\"aria-describedby\":\"inputGroup-sizing-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group input-group-sm mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-group-prepend edit-icon\",children:/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",id:\"inputGroup-sizing-sm\",children:\"Last name\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"lastName\",className:\"form-control\",value:lastName,\"aria-label\":\"Small\",onChange:this.dataHandler,\"aria-describedby\":\"inputGroup-sizing-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group input-group-sm mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-group-prepend edit-icon\",children:/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",id:\"inputGroup-sizing-sm\",children:\"Address\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address\",className:\"form-control\",value:address,\"aria-label\":\"Small\",onChange:this.dataHandler,\"aria-describedby\":\"inputGroup-sizing-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group input-group-sm mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-group-prepend edit-icon\",children:/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",id:\"inputGroup-sizing-sm\",children:\"Email\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\",className:\"form-control\",value:email,\"aria-label\":\"Small\",onChange:this.dataHandler,\"aria-describedby\":\"inputGroup-sizing-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group input-group-sm mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-group-prepend edit-icon\",children:/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",id:\"inputGroup-sizing-sm\",children:\"Phone\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"phone\",className:\"form-control\",value:phone,\"aria-label\":\"Small\",onChange:this.dataHandler,\"aria-describedby\":\"inputGroup-sizing-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group input-group-sm mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-group-prepend edit-icon\",children:/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",id:\"inputGroup-sizing-sm\",children:\"Comment\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"comment\",className:\"form-control\",value:comment,\"aria-label\":\"Small\",onChange:this.dataHandler,\"aria-describedby\":\"inputGroup-sizing-sm\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-secondary\",onClick:function onClick(){return _this2.goBack();},children:\"Back\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-success ms-2\",onClick:function onClick(){return _this2.edit();},children:\"Save\"})]})}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-5\",children:\"Advanced\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card mt-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"basic-url\",children:\"Books limit\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-group-prepend\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",type:\"button\",onClick:function onClick(){return _this2.increaseLimit();},children:\"Confirm\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"bookLimit\",className:\"form-control\",value:bookLimit,onChange:this.dataHandler,id:\"basic-url\",\"aria-describedby\":\"basic-addon3\"})]}),/*#__PURE__*/_jsx(\"label\",{for:\"banned\",children:\"Is banned\"}),/*#__PURE__*/_jsxs(Dropdown,{children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{variant:\"success\",id:\"dropdown-basic\",children:\"Dropdown Button\"}),/*#__PURE__*/_jsxs(Dropdown.Menu,{children:[/*#__PURE__*/_jsx(Dropdown.Item,{href:\"#/action-1\",children:\"Action\"}),/*#__PURE__*/_jsx(Dropdown.Item,{href:\"#/action-2\",children:\"Another action\"}),/*#__PURE__*/_jsx(Dropdown.Item,{href:\"#/action-3\",children:\"Something else\"})]})]})]})})]});}}]);return EditUser;}(Component);export default withRouter(EditUser);","map":{"version":3,"sources":["/home/szymon/College/PUZ-Biblioteka/Admin-Panel/admin-panel/admin-panel/src/components/user/EditUser.jsx"],"names":["React","Component","NavLink","withRouter","Dropdown","EditUser","state","id","email","firstName","lastName","address","phone","bookLimit","notFound","errorMessage","user","fetchUser","fetch","props","prefix","method","headers","getToken","then","res","json","console","log","status","setState","message","ready","edit","getEditUserObject","username","body","JSON","stringify","alert","increaseLimit","getEditLimitObject","comment","limit","dataHandler","e","target","name","value","filterByUsername","preventDefault","fetchBorrow","myFunction","document","getElementById","classList","toggle","goBack","history","push","url","location","pathname","array","split","_id","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { NavLink} from 'react-router-dom';\nimport { withRouter } from 'react-router-dom'\nimport { Dropdown } from 'semantic-ui-react'\n\nclass EditUser extends Component {\n    state = {\n        id: \"\",\n        email: \"\",\n        firstName: \"\",\n        lastName: \"\",\n        address: \"\",\n        phone: \"\",\n        bookLimit: 3,\n        notFound: false,\n        errorMessage: \"\",\n        user: null\n     }\n\n    componentDidMount(){\n        const url = this.props.location.pathname;\n        const array = url.split('/');\n        const _id = array[array.length-1];\n\n        this.fetchUser(_id);\n        this.setState({id: _id});\n    }\n     \n\n    fetchUser= (id) =>{\n        fetch(this.props.prefix + `/api/library/admins/users/${id}`, {\n           method: 'GET',\n           headers: {\"Content-Type\": \"application/json\", \"Authorization\": this.props.getToken()}\n          })\n        .then(res => res.json())\n        .then(res => {\n            console.log(res)\n            if(res.status === 404){\n                this.setState({notFound: true, errorMessage: res.message});\n            }\n            else{\n                this.setState({user: \"asda\", notFound: false, ready: true});\n                //this.setState({user: res, notFound: false, ready: true, id: res.id, email: res.email, comment: res.comment, firstName: res.firstName, lastName: res.lastName, address: res.address, phone: res.phone, bookLimit: res.maxBooks});\n            }       \n        })\n      }\n\n  edit = () => {\n    console.log(\"here\");\n    console.log(this.getEditUserObject());\n\n    fetch(`${this.props.prefix}/api/library/admins/users/edit/${this.state.user.username}`,  {\n       method: 'POST',\n       body: JSON.stringify(this.getEditUserObject()),\n       headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": this.props.getToken()\n    }\n      })\n      .then(res => {\n          if(res.status === 200){\n              alert(\"Data changed successfully\");\n          }\n      });\n  }\n\n  increaseLimit = () =>{\n    fetch(`${this.props.prefix}/api/library/admins/users/${this.state.user.username}/bookLimit`,  {\n        method: 'POST',\n        body: JSON.stringify(this.getEditLimitObject()),\n        headers: {\n         \"Content-Type\": \"application/json\",\n         \"Authorization\": this.props.getToken()\n     }\n       })\n       .then(res => {\n           if(res.status === 200){\n               alert(\"Limit changed successfully\");\n           }\n       });\n  }\n\n  getEditUserObject = () =>{\n    let firstName = this.state.firstName === this.state.user.firstName? \"\" : this.state.firstName;\n    let lastName = this.state.lastName === this.state.user.lastName? \"\" : this.state.lastName;\n    let phone = this.state.phone === this.state.user.phone? \"\" : this.state.phone;\n    let address = this.state.address === this.state.user.address? \"\" : this.state.address;\n    let email = this.state.email === this.state.user.email? \"\" : this.state.email;\n    let comment = this.state.comment === this.state.user.comment? \"\" : this.state.comment;\n\n    return {firstName, lastName, phone, address, email, comment};\n  }\n\n  getEditLimitObject = () =>{\n    let limit = this.state.bookLimit < 1 ? 3 : this.state.bookLimit\n\n    return {limit};\n  }\n\n  dataHandler = (e) =>{\n    this.setState({[e.target.name]: e.target.value});\n}   \n\n  filterByUsername = (e) =>{\n    e.preventDefault();\n    this.fetchBorrow(0, 10, this.state.username);\n  }\n\n   myFunction = () => {\n    document.getElementById(\"myDropdown\").classList.toggle(\"show\");\n  }\n\n  goBack = () => {\n    this.props.history.push('/users');\n  }\n\n    render() { \n        const {user, notFound, errorMessage, firstName, lastName, phone, address, comment, email, bookLimit} = this.state;\n        if(user === null && notFound===false){\n            return (<div>Loading...</div>)\n        }\n        else if(notFound === true){\n            return (\n                <section>\n                    <div><b>{errorMessage}</b></div> \n                </section>\n            )\n        }\n        return ( \n            <section className=\"\">\n                <h3>Edit <b> {user.username} </b> account</h3>   \n                <div className=\"card mt-1\">\n                    <div className=\"card-body\">      \n                    <div className=\"input-group input-group-sm mb-3\">\n                        <div className=\"input-group-prepend edit-icon\">\n                        <span className=\"input-group-text\" id=\"inputGroup-sizing-sm\">First name</span>\n                        </div>\n                        <input type=\"text\" name=\"firstName\" className=\"form-control\" value={firstName} aria-label=\"Small\" onChange={this.dataHandler} aria-describedby=\"inputGroup-sizing-sm\"/>\n                    </div>\n\n                    <div className=\"input-group input-group-sm mb-3\">\n                        <div className=\"input-group-prepend edit-icon\">\n                        <span className=\"input-group-text\" id=\"inputGroup-sizing-sm\">Last name</span>\n                        </div>\n                        <input type=\"text\" name=\"lastName\" className=\"form-control\" value={lastName} aria-label=\"Small\" onChange={this.dataHandler} aria-describedby=\"inputGroup-sizing-sm\"/>\n                    </div>\n\n                    <div className=\"input-group input-group-sm mb-3\">\n                        <div className=\"input-group-prepend edit-icon\">\n                        <span className=\"input-group-text\" id=\"inputGroup-sizing-sm\">Address</span>\n                        </div>\n                        <input type=\"text\" name=\"address\" className=\"form-control\" value={address} aria-label=\"Small\" onChange={this.dataHandler} aria-describedby=\"inputGroup-sizing-sm\"/>\n                    </div>\n\n                    <div className=\"input-group input-group-sm mb-3\">\n                        <div className=\"input-group-prepend edit-icon\">\n                        <span className=\"input-group-text\" id=\"inputGroup-sizing-sm\">Email</span>\n                        </div>\n                        <input type=\"text\" name=\"email\" className=\"form-control\" value={email} aria-label=\"Small\" onChange={this.dataHandler} aria-describedby=\"inputGroup-sizing-sm\"/>\n                    </div>\n\n                    <div className=\"input-group input-group-sm mb-3\">\n                        <div className=\"input-group-prepend edit-icon\">\n                        <span className=\"input-group-text\" id=\"inputGroup-sizing-sm\">Phone</span>\n                        </div>\n                        <input type=\"text\" name=\"phone\" className=\"form-control\" value={phone} aria-label=\"Small\" onChange={this.dataHandler} aria-describedby=\"inputGroup-sizing-sm\"/>\n                    </div>\n\n                    <div className=\"input-group input-group-sm mb-3\">\n                        <div className=\"input-group-prepend edit-icon\">\n                        <span className=\"input-group-text\" id=\"inputGroup-sizing-sm\">Comment</span>\n                        </div>\n                        <input type=\"text\" name=\"comment\" className=\"form-control\" value={comment} aria-label=\"Small\" onChange={this.dataHandler} aria-describedby=\"inputGroup-sizing-sm\"/>\n                    </div>\n\n                    <button type=\"button\" className=\"btn btn-outline-secondary\" onClick={() => this.goBack()}>Back</button>\n                    <button type=\"button\" className=\"btn btn-success ms-2\" onClick={() => this.edit()}>Save</button>\n                    </div>  \n                </div>\n\n                <h3 className=\"mt-5\">Advanced</h3>\n                <div className=\"card mt-1\">\n                    <div className=\"card-body\">\n                    <label for=\"basic-url\">Books limit</label>\n                        <div className=\"input-group mb-3\">\n                        <div className=\"input-group-prepend\">\n                        <button className=\"btn btn-success\" type=\"button\" onClick={() => this.increaseLimit()}>Confirm</button>\n                        </div>\n                        <input type=\"number\" name=\"bookLimit\" className=\"form-control\" value={bookLimit} onChange={this.dataHandler} id=\"basic-url\" aria-describedby=\"basic-addon3\"/>\n                        </div>\n\n                        <label for=\"banned\">Is banned</label>\n                            <Dropdown>\n                    <Dropdown.Toggle variant=\"success\" id=\"dropdown-basic\">\n                        Dropdown Button\n                    </Dropdown.Toggle>\n\n                    <Dropdown.Menu>\n                        <Dropdown.Item href=\"#/action-1\">Action</Dropdown.Item>\n                        <Dropdown.Item href=\"#/action-2\">Another action</Dropdown.Item>\n                        <Dropdown.Item href=\"#/action-3\">Something else</Dropdown.Item>\n                    </Dropdown.Menu>\n                    </Dropdown>\n                    </div>\n                </div>\n      \n                             \n            </section>\n         );\n    }\n}\n \nexport default withRouter(EditUser);"]},"metadata":{},"sourceType":"module"}