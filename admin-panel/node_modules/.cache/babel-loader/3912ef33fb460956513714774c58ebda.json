{"ast":null,"code":"import _classCallCheck from\"/home/szymon/College/PUZ-Biblioteka/Admin-Panel/admin-panel/admin-panel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/szymon/College/PUZ-Biblioteka/Admin-Panel/admin-panel/admin-panel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/szymon/College/PUZ-Biblioteka/Admin-Panel/admin-panel/admin-panel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/szymon/College/PUZ-Biblioteka/Admin-Panel/admin-panel/admin-panel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{NavLink}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Users=/*#__PURE__*/function(_Component){_inherits(Users,_Component);var _super=_createSuper(Users);function Users(){var _this;_classCallCheck(this,Users);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={users:[],notFound:false,username:\"\",errorMessage:\"\"};_this.fetchUsers=function(page,limit,username){fetch(_this.props.prefix+\"/api/library/admins/users?page=\".concat(page,\"&limit=\").concat(limit,\"&username=\").concat(username),{method:'GET',headers:{\"Content-Type\":\"application/json\",\"Authorization\":_this.props.getToken()}}).then(function(res){return res.json();}).then(function(res){if(res.status===404){_this.setState({notFound:true,errorMessage:res.message});}else if(res.status==403){_this.setState({notFound:true,errorMessage:\"You have to login to administrator account to get access to this resource\"});}else{_this.setState({users:res,notFound:false});}});};_this.usernameHandler=function(name){_this.setState({username:name.target.value});};_this.filterByUsername=function(e){e.preventDefault();_this.fetchUsers(0,15,_this.state.username);};return _this;}_createClass(Users,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchUsers(0,15,this.state.username);}},{key:\"render\",value:function render(){var _this$state=this.state,users=_this$state.users,notFound=_this$state.notFound,errorMessage=_this$state.errorMessage;if(!users.length&&notFound===false){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}else if(notFound===true){return/*#__PURE__*/_jsxs(\"section\",{children:[this.searchBar(),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"b\",{children:errorMessage})})]});}return/*#__PURE__*/_jsxs(\"section\",{children:[this.searchBar(),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Username\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Full name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Address\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Book limit\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Warnings\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"isBanned\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:this.state.users.map(function(user,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:index}),/*#__PURE__*/_jsx(\"td\",{children:user.username}),/*#__PURE__*/_jsxs(\"td\",{children:[user.firstName,\" \",user.lastName]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"cutText address\",children:user.address})}),/*#__PURE__*/_jsx(\"td\",{children:user.phone}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.maxBooks}),/*#__PURE__*/_jsx(\"td\",{children:user.warnings}),/*#__PURE__*/_jsx(\"td\",{children:user.role}),/*#__PURE__*/_jsx(\"td\",{children:user.banned?\"Yes\":\"No\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(NavLink,{className:\"btn btn-success\",to:{pathname:\"/users/\".concat(user.id),query:{id:user.id}},children:\"Edit\"})})]},index);})})]})]});}},{key:\"searchBar\",value:function searchBar(){return/*#__PURE__*/_jsxs(\"form\",{className:\"d-flex justify-content-center mb-5\",onClick:this.filterByUsername,children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-auto\",children:/*#__PURE__*/_jsx(\"p\",{className:\"center-text mx-5\",children:\"Find by username\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-auto\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"visually-hidden\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"username\",value:this.state.username,onChange:this.usernameHandler})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-auto\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary mb-3 mx-3\",children:\"Filter\"})})]});}}]);return Users;}(Component);export default Users;","map":{"version":3,"sources":["/home/szymon/College/PUZ-Biblioteka/Admin-Panel/admin-panel/admin-panel/src/components/user/Users.jsx"],"names":["React","Component","NavLink","Users","state","users","notFound","username","errorMessage","fetchUsers","page","limit","fetch","props","prefix","method","headers","getToken","then","res","json","status","setState","message","usernameHandler","name","target","value","filterByUsername","e","preventDefault","length","searchBar","map","user","index","firstName","lastName","address","phone","email","maxBooks","warnings","role","banned","pathname","id","query"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { NavLink} from 'react-router-dom';\n\nclass Users extends Component {\n    state = {\n        users: [],\n        notFound: false,\n        username: \"\",\n        errorMessage: \"\",\n     }\n\n    componentDidMount(){\n        this.fetchUsers(0, 15, this.state.username);\n    }\n     \n    fetchUsers = (page, limit, username) =>{\n        fetch(this.props.prefix + `/api/library/admins/users?page=${page}&limit=${limit}&username=${username}`, {\n        method: 'GET',\n        headers: {\"Content-Type\": \"application/json\", \"Authorization\": this.props.getToken()}\n        })\n        .then(res => res.json())\n        .then(res => {\n            if(res.status === 404){\n                this.setState({notFound: true, errorMessage: res.message});\n            }\n            else if (res.status == 403){\n                this.setState({notFound: true, errorMessage: \"You have to login to administrator account to get access to this resource\"})\n            }\n            else{\n                this.setState({users: res, notFound: false})\n            }       \n        })\n  }\n\n  usernameHandler = (name) =>{\n    this.setState({username: name.target.value});\n}   \n\n  filterByUsername = (e) =>{\n    e.preventDefault();\n    this.fetchUsers(0, 15, this.state.username);\n  }\n\n    render() { \n        \n        const {users, notFound, errorMessage} = this.state;\n\n        if(!users.length && notFound===false){\n            return (<div>Loading...</div>)\n        }\n        else if(notFound === true){\n            return (\n                <section>\n                    {this.searchBar()}\n                    <div><b>{errorMessage}</b></div> \n                </section>\n            )\n        }\n        return ( \n            <section>\n            {this.searchBar()}           \n\n            <table className=\"table table-striped\">\n                <thead>\n                    <tr>\n                    <th scope=\"col\">#</th>\n                    <th scope=\"col\">Username</th>\n                    <th scope=\"col\">Full name</th>\n                    <th scope=\"col\" >Address</th>\n                    <th scope=\"col\">Phone</th>\n                    <th scope=\"col\">Email</th>\n                    <th scope=\"col\">Book limit</th>\n                    <th scope=\"col\">Warnings</th>\n                    <th scope=\"col\">Role</th>\n                    <th scope=\"col\">isBanned</th>\n                    <th scope=\"col\">Action</th>\n                    </tr>\n                </thead> \n            <tbody >\n            {this.state.users.map((user, index) =>{\n                return(\n                    <tr key={index}>\n                      <th scope=\"row\">{index}</th>\n                      <td>{user.username}</td>\n                      <td>{user.firstName} {user.lastName}</td>\n                      <td ><span className=\"cutText address\">{user.address}</span></td>\n                      <td>{user.phone}</td>\n                      <td>{user.email}</td>\n                      <td>{user.maxBooks}</td>\n                      <td>{user.warnings}</td>\n                      <td>{user.role}</td>\n                      <td>{user.banned? \"Yes\" : \"No\"}</td>\n                      <td><NavLink className=\"btn btn-success\" to={{pathname: `/users/${user.id}`, query: {id: user.id}}}>Edit</NavLink></td>\n                    </tr>             \n                )\n            })}\n\n            </tbody>\n            </table>\n            </section>\n         );\n    }\n\n    searchBar(){\n        return(\n            <form className=\"d-flex justify-content-center mb-5\" onClick={this.filterByUsername}>\n                <div className=\"col-auto\">\n                    <p className=\"center-text mx-5\">Find by username</p>\n                </div>\n                <div className=\"col-auto\">\n                    <label className=\"visually-hidden\">Username</label>\n                    <input type=\"text\" className=\"form-control\" placeholder=\"username\" value={this.state.username} onChange={this.usernameHandler}/>\n                </div>\n                <div className=\"col-auto\">\n                    <button type=\"submit\"   className=\"btn btn-primary mb-3 mx-3\" >Filter</button>\n                </div>\n            </form>\n        )\n    }\n}\n \nexport default Users;"]},"metadata":{},"sourceType":"module"}