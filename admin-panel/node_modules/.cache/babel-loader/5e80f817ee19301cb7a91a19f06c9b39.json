{"ast":null,"code":"var _jsxFileName = \"/home/szymon/College/PUZ-Biblioteka/Admin-Panel/admin-panel/admin-panel/src/components/user/EditUser.jsx\";\nimport React, { Component } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { withRouter } from 'react-router-dom';\nimport Confirmation from '../utils/Confirmation';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass EditUser extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      id: \"\",\n      email: \"\",\n      firstName: \"\",\n      lastName: \"\",\n      address: \"\",\n      phone: \"\",\n      bookLimit: 3,\n      notFound: false,\n      errorMessage: \"\",\n      action: null,\n      user: null\n    };\n\n    this.fetchUser = id => {\n      fetch(this.props.prefix + `/api/library/admins/users/${id}`, {\n        method: 'GET',\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": this.props.getToken()\n        }\n      }).then(res => res.json()).then(res => {\n        if (res.status === 404) {\n          this.setState({\n            notFound: true,\n            errorMessage: res.message\n          });\n        } else if (res.status === 403) {\n          this.setState({\n            notFound: true,\n            errorMessage: \"You have to login to administrator account to get access to this resource\"\n          });\n        } else {\n          this.setState({\n            user: res,\n            notFound: false,\n            ready: true\n          });\n          this.setState({\n            id: res.id,\n            email: res.email,\n            comment: res.comment,\n            firstName: res.firstName,\n            lastName: res.lastName,\n            address: res.address,\n            phone: res.phone,\n            bookLimit: res.maxBooks\n          });\n        }\n      });\n    };\n\n    this.edit = () => {\n      console.log(\"here\");\n      console.log(this.getEditUserObject());\n      fetch(`${this.props.prefix}/api/library/admins/users/edit/${this.state.user.username}`, {\n        method: 'POST',\n        body: JSON.stringify(this.getEditUserObject()),\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": this.props.getToken()\n        }\n      }).then(res => {\n        if (res.status === 200) {\n          alert(\"Data changed successfully\");\n        }\n      });\n    };\n\n    this.increaseLimit = () => {\n      fetch(`${this.props.prefix}/api/library/admins/users/${this.state.user.username}/bookLimit`, {\n        method: 'POST',\n        body: JSON.stringify(this.getEditLimitObject()),\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": this.props.getToken()\n        }\n      }).then(res => {\n        if (res.status === 200) {\n          alert(\"Limit changed successfully\");\n        }\n      });\n    };\n\n    this.getEditUserObject = () => {\n      let firstName = this.state.firstName === this.state.user.firstName ? \"\" : this.state.firstName;\n      let lastName = this.state.lastName === this.state.user.lastName ? \"\" : this.state.lastName;\n      let phone = this.state.phone === this.state.user.phone ? \"\" : this.state.phone;\n      let address = this.state.address === this.state.user.address ? \"\" : this.state.address;\n      let email = this.state.email === this.state.user.email ? \"\" : this.state.email;\n      let comment = this.state.comment === this.state.user.comment ? \"\" : this.state.comment;\n      return {\n        firstName,\n        lastName,\n        phone,\n        address,\n        email,\n        comment\n      };\n    };\n\n    this.getEditLimitObject = () => {\n      let limit = this.state.bookLimit < 1 ? 3 : this.state.bookLimit;\n      return {\n        limit\n      };\n    };\n\n    this.dataHandler = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.filterByUsername = e => {\n      e.preventDefault();\n      this.fetchBorrow(0, 10, this.state.username);\n    };\n\n    this.myFunction = () => {\n      document.getElementById(\"myDropdown\").classList.toggle(\"show\");\n    };\n\n    this.goBack = () => {\n      this.props.history.goBack(); //this.props.history.push('/users');\n    };\n\n    this.activate = () => {\n      fetch(`${this.props.prefix}/api/library/admins/users/${this.state.user.username}/activate`, {\n        method: 'GET',\n        headers: {\n          \"Authorization\": this.props.getToken()\n        }\n      }).then(res => {\n        if (res.status === 200) {\n          //    alert(\"User account activated\");\n          this.closePopup();\n          this.setState(prevState => ({\n            user: { ...prevState.user,\n              banned: false\n            }\n          }));\n        }\n      });\n    };\n\n    this.deactivate = () => {\n      fetch(`${this.props.prefix}/api/library/admins/users/${this.state.user.username}/deactivate/User banned by administrator`, {\n        method: 'GET',\n        headers: {\n          \"Authorization\": this.props.getToken()\n        }\n      }).then(res => {\n        if (res.status === 200) {\n          //  alert(\"User account deactivated\");\n          this.closePopup();\n          this.setState(prevState => ({\n            user: { ...prevState.user,\n              banned: true\n            }\n          }));\n        }\n      });\n    };\n\n    this.closePopup = () => {\n      const el1 = document.querySelector('.modal-backdrop');\n      const el2 = document.querySelector('#confirmId');\n      el2.classList.remove('show');\n      el1.classList.remove('show');\n      el1.classList.remove('fade');\n      el1.classList.remove('modal-backdrop');\n    };\n\n    this.setAction = action => {\n      this.setState({\n        action: action\n      });\n    };\n  }\n\n  componentDidMount() {\n    const url = this.props.location.pathname;\n    const array = url.split('/');\n    const _id = array[array.length - 1];\n    this.fetchUser(_id);\n    this.setState({\n      id: _id\n    });\n  }\n\n  render() {\n    const {\n      user,\n      notFound,\n      errorMessage,\n      firstName,\n      lastName,\n      phone,\n      address,\n      comment,\n      email,\n      bookLimit\n    } = this.state;\n\n    if (user === null && notFound === false) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 21\n      }, this);\n    } else if (notFound === true) {\n      return /*#__PURE__*/_jsxDEV(\"section\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: errorMessage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 26\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Edit \", /*#__PURE__*/_jsxDEV(\"b\", {\n          children: [\" \", user.username, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 26\n        }, this), \" account\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card mt-1\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group input-group-sm mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group-prepend edit-icon\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"input-group-text\",\n                id: \"inputGroup-sizing-sm\",\n                children: \"First name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"firstName\",\n              className: \"form-control\",\n              value: firstName,\n              \"aria-label\": \"Small\",\n              onChange: this.dataHandler,\n              \"aria-describedby\": \"inputGroup-sizing-sm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group input-group-sm mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group-prepend edit-icon\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"input-group-text\",\n                id: \"inputGroup-sizing-sm\",\n                children: \"Last name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"lastName\",\n              className: \"form-control\",\n              value: lastName,\n              \"aria-label\": \"Small\",\n              onChange: this.dataHandler,\n              \"aria-describedby\": \"inputGroup-sizing-sm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group input-group-sm mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group-prepend edit-icon\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"input-group-text\",\n                id: \"inputGroup-sizing-sm\",\n                children: \"Address\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"address\",\n              className: \"form-control\",\n              value: address,\n              \"aria-label\": \"Small\",\n              onChange: this.dataHandler,\n              \"aria-describedby\": \"inputGroup-sizing-sm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group input-group-sm mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group-prepend edit-icon\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"input-group-text\",\n                id: \"inputGroup-sizing-sm\",\n                children: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"email\",\n              className: \"form-control\",\n              value: email,\n              \"aria-label\": \"Small\",\n              onChange: this.dataHandler,\n              \"aria-describedby\": \"inputGroup-sizing-sm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group input-group-sm mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group-prepend edit-icon\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"input-group-text\",\n                id: \"inputGroup-sizing-sm\",\n                children: \"Phone\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"phone\",\n              className: \"form-control\",\n              value: phone,\n              \"aria-label\": \"Small\",\n              onChange: this.dataHandler,\n              \"aria-describedby\": \"inputGroup-sizing-sm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group input-group-sm mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group-prepend edit-icon\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"input-group-text\",\n                id: \"inputGroup-sizing-sm\",\n                children: \"Comment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"comment\",\n              className: \"form-control\",\n              value: comment,\n              \"aria-label\": \"Small\",\n              onChange: this.dataHandler,\n              \"aria-describedby\": \"inputGroup-sizing-sm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-outline-secondary\",\n            onClick: () => this.goBack(),\n            children: \"Back\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-success ms-2\",\n            \"data-bs-toggle\": \"modal\",\n            \"data-bs-target\": \"#confirmId\",\n            onClick: () => this.setAction(this.edit),\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"mt-5\",\n        children: \"Advanced\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card mt-1\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"basic-url\",\n            children: \"Books limit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group-prepend\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-success\",\n                type: \"button\",\n                onClick: () => this.increaseLimit(),\n                children: \"Confirm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"bookLimit\",\n              className: \"form-control\",\n              value: bookLimit,\n              onChange: this.dataHandler,\n              id: \"basic-url\",\n              \"aria-describedby\": \"basic-addon3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Is active\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: user.banned ? /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-warning\",\n              \"data-bs-toggle\": \"modal\",\n              \"data-bs-target\": \"#confirmId\",\n              onClick: () => this.setAction(this.activate),\n              children: \"Activate account\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 29\n            }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-danger\",\n              \"data-bs-toggle\": \"modal\",\n              \"data-bs-target\": \"#confirmId\",\n              onClick: () => this.setAction(this.deactivate),\n              children: \"Deactivate account\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 17\n      }, this), Confirmation(this.state.action)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(EditUser);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/home/szymon/College/PUZ-Biblioteka/Admin-Panel/admin-panel/admin-panel/src/components/user/EditUser.jsx"],"names":["React","Component","NavLink","withRouter","Confirmation","EditUser","state","id","email","firstName","lastName","address","phone","bookLimit","notFound","errorMessage","action","user","fetchUser","fetch","props","prefix","method","headers","getToken","then","res","json","status","setState","message","ready","comment","maxBooks","edit","console","log","getEditUserObject","username","body","JSON","stringify","alert","increaseLimit","getEditLimitObject","limit","dataHandler","e","target","name","value","filterByUsername","preventDefault","fetchBorrow","myFunction","document","getElementById","classList","toggle","goBack","history","activate","closePopup","prevState","banned","deactivate","el1","querySelector","el2","remove","setAction","componentDidMount","url","location","pathname","array","split","_id","length","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAuB,kBAAvB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,YAAP,MAAyB,uBAAzB;;;AAEA,MAAMC,QAAN,SAAuBJ,SAAvB,CAAiC;AAAA;AAAA;AAAA,SAC7BK,KAD6B,GACrB;AACJC,MAAAA,EAAE,EAAE,EADA;AAEJC,MAAAA,KAAK,EAAE,EAFH;AAGJC,MAAAA,SAAS,EAAE,EAHP;AAIJC,MAAAA,QAAQ,EAAE,EAJN;AAKJC,MAAAA,OAAO,EAAE,EALL;AAMJC,MAAAA,KAAK,EAAE,EANH;AAOJC,MAAAA,SAAS,EAAE,CAPP;AAQJC,MAAAA,QAAQ,EAAE,KARN;AASJC,MAAAA,YAAY,EAAE,EATV;AAUJC,MAAAA,MAAM,EAAE,IAVJ;AAWJC,MAAAA,IAAI,EAAE;AAXF,KADqB;;AAAA,SAyB7BC,SAzB6B,GAyBjBX,EAAD,IAAO;AACdY,MAAAA,KAAK,CAAC,KAAKC,KAAL,CAAWC,MAAX,GAAqB,6BAA4Bd,EAAG,EAArD,EAAwD;AAC1De,QAAAA,MAAM,EAAE,KADkD;AAE1DC,QAAAA,OAAO,EAAE;AAAC,0BAAgB,kBAAjB;AAAqC,2BAAiB,KAAKH,KAAL,CAAWI,QAAX;AAAtD;AAFiD,OAAxD,CAAL,CAICC,IAJD,CAIMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAJb,EAKCF,IALD,CAKMC,GAAG,IAAI;AAET,YAAGA,GAAG,CAACE,MAAJ,KAAe,GAAlB,EAAsB;AAClB,eAAKC,QAAL,CAAc;AAACf,YAAAA,QAAQ,EAAE,IAAX;AAAiBC,YAAAA,YAAY,EAAEW,GAAG,CAACI;AAAnC,WAAd;AACH,SAFD,MAGK,IAAIJ,GAAG,CAACE,MAAJ,KAAe,GAAnB,EAAuB;AACxB,eAAKC,QAAL,CAAc;AAACf,YAAAA,QAAQ,EAAE,IAAX;AAAiBC,YAAAA,YAAY,EAAE;AAA/B,WAAd;AACH,SAFI,MAGD;AACA,eAAKc,QAAL,CAAc;AAACZ,YAAAA,IAAI,EAAES,GAAP;AAAYZ,YAAAA,QAAQ,EAAE,KAAtB;AAA6BiB,YAAAA,KAAK,EAAE;AAApC,WAAd;AACA,eAAKF,QAAL,CAAc;AAACtB,YAAAA,EAAE,EAAEmB,GAAG,CAACnB,EAAT;AAAaC,YAAAA,KAAK,EAAEkB,GAAG,CAAClB,KAAxB;AAA+BwB,YAAAA,OAAO,EAAEN,GAAG,CAACM,OAA5C;AAAqDvB,YAAAA,SAAS,EAAEiB,GAAG,CAACjB,SAApE;AAA+EC,YAAAA,QAAQ,EAAEgB,GAAG,CAAChB,QAA7F;AAAuGC,YAAAA,OAAO,EAAEe,GAAG,CAACf,OAApH;AAA6HC,YAAAA,KAAK,EAAEc,GAAG,CAACd,KAAxI;AAA+IC,YAAAA,SAAS,EAAEa,GAAG,CAACO;AAA9J,WAAd;AACH;AACJ,OAjBD;AAkBD,KA5C0B;;AAAA,SA8C/BC,IA9C+B,GA8CxB,MAAM;AACXC,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,iBAAL,EAAZ;AAEAlB,MAAAA,KAAK,CAAE,GAAE,KAAKC,KAAL,CAAWC,MAAO,kCAAiC,KAAKf,KAAL,CAAWW,IAAX,CAAgBqB,QAAS,EAAhF,EAAoF;AACtFhB,QAAAA,MAAM,EAAE,MAD8E;AAEtFiB,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe,KAAKJ,iBAAL,EAAf,CAFgF;AAGtFd,QAAAA,OAAO,EAAE;AACR,0BAAgB,kBADR;AAER,2BAAiB,KAAKH,KAAL,CAAWI,QAAX;AAFT;AAH6E,OAApF,CAAL,CAQGC,IARH,CAQQC,GAAG,IAAI;AACT,YAAGA,GAAG,CAACE,MAAJ,KAAe,GAAlB,EAAsB;AAClBc,UAAAA,KAAK,CAAC,2BAAD,CAAL;AACH;AACJ,OAZH;AAaD,KA/D8B;;AAAA,SAiE/BC,aAjE+B,GAiEf,MAAK;AACnBxB,MAAAA,KAAK,CAAE,GAAE,KAAKC,KAAL,CAAWC,MAAO,6BAA4B,KAAKf,KAAL,CAAWW,IAAX,CAAgBqB,QAAS,YAA3E,EAAyF;AAC1FhB,QAAAA,MAAM,EAAE,MADkF;AAE1FiB,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe,KAAKG,kBAAL,EAAf,CAFoF;AAG1FrB,QAAAA,OAAO,EAAE;AACR,0BAAgB,kBADR;AAER,2BAAiB,KAAKH,KAAL,CAAWI,QAAX;AAFT;AAHiF,OAAzF,CAAL,CAQIC,IARJ,CAQSC,GAAG,IAAI;AACT,YAAGA,GAAG,CAACE,MAAJ,KAAe,GAAlB,EAAsB;AAClBc,UAAAA,KAAK,CAAC,4BAAD,CAAL;AACH;AACJ,OAZJ;AAaD,KA/E8B;;AAAA,SAiF/BL,iBAjF+B,GAiFX,MAAK;AACvB,UAAI5B,SAAS,GAAG,KAAKH,KAAL,CAAWG,SAAX,KAAyB,KAAKH,KAAL,CAAWW,IAAX,CAAgBR,SAAzC,GAAoD,EAApD,GAAyD,KAAKH,KAAL,CAAWG,SAApF;AACA,UAAIC,QAAQ,GAAG,KAAKJ,KAAL,CAAWI,QAAX,KAAwB,KAAKJ,KAAL,CAAWW,IAAX,CAAgBP,QAAxC,GAAkD,EAAlD,GAAuD,KAAKJ,KAAL,CAAWI,QAAjF;AACA,UAAIE,KAAK,GAAG,KAAKN,KAAL,CAAWM,KAAX,KAAqB,KAAKN,KAAL,CAAWW,IAAX,CAAgBL,KAArC,GAA4C,EAA5C,GAAiD,KAAKN,KAAL,CAAWM,KAAxE;AACA,UAAID,OAAO,GAAG,KAAKL,KAAL,CAAWK,OAAX,KAAuB,KAAKL,KAAL,CAAWW,IAAX,CAAgBN,OAAvC,GAAgD,EAAhD,GAAqD,KAAKL,KAAL,CAAWK,OAA9E;AACA,UAAIH,KAAK,GAAG,KAAKF,KAAL,CAAWE,KAAX,KAAqB,KAAKF,KAAL,CAAWW,IAAX,CAAgBT,KAArC,GAA4C,EAA5C,GAAiD,KAAKF,KAAL,CAAWE,KAAxE;AACA,UAAIwB,OAAO,GAAG,KAAK1B,KAAL,CAAW0B,OAAX,KAAuB,KAAK1B,KAAL,CAAWW,IAAX,CAAgBe,OAAvC,GAAgD,EAAhD,GAAqD,KAAK1B,KAAL,CAAW0B,OAA9E;AAEA,aAAO;AAACvB,QAAAA,SAAD;AAAYC,QAAAA,QAAZ;AAAsBE,QAAAA,KAAtB;AAA6BD,QAAAA,OAA7B;AAAsCH,QAAAA,KAAtC;AAA6CwB,QAAAA;AAA7C,OAAP;AACD,KA1F8B;;AAAA,SA4F/BY,kBA5F+B,GA4FV,MAAK;AACxB,UAAIC,KAAK,GAAG,KAAKvC,KAAL,CAAWO,SAAX,GAAuB,CAAvB,GAA2B,CAA3B,GAA+B,KAAKP,KAAL,CAAWO,SAAtD;AAEA,aAAO;AAACgC,QAAAA;AAAD,OAAP;AACD,KAhG8B;;AAAA,SAkG/BC,WAlG+B,GAkGhBC,CAAD,IAAM;AAClB,WAAKlB,QAAL,CAAc;AAAC,SAACkB,CAAC,CAACC,MAAF,CAASC,IAAV,GAAiBF,CAAC,CAACC,MAAF,CAASE;AAA3B,OAAd;AACH,KApGgC;;AAAA,SAsG/BC,gBAtG+B,GAsGXJ,CAAD,IAAM;AACvBA,MAAAA,CAAC,CAACK,cAAF;AACA,WAAKC,WAAL,CAAiB,CAAjB,EAAoB,EAApB,EAAwB,KAAK/C,KAAL,CAAWgC,QAAnC;AACD,KAzG8B;;AAAA,SA2G9BgB,UA3G8B,GA2GjB,MAAM;AAClBC,MAAAA,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,SAAtC,CAAgDC,MAAhD,CAAuD,MAAvD;AACD,KA7G8B;;AAAA,SA+G/BC,MA/G+B,GA+GtB,MAAM;AACX,WAAKvC,KAAL,CAAWwC,OAAX,CAAmBD,MAAnB,GADW,CAEb;AACD,KAlH8B;;AAAA,SAoH/BE,QApH+B,GAoHpB,MAAK;AAEd1C,MAAAA,KAAK,CAAE,GAAE,KAAKC,KAAL,CAAWC,MAAO,6BAA4B,KAAKf,KAAL,CAAWW,IAAX,CAAgBqB,QAAS,WAA3E,EAAwF;AACzFhB,QAAAA,MAAM,EAAE,KADiF;AAEzFC,QAAAA,OAAO,EAAE;AACR,2BAAiB,KAAKH,KAAL,CAAWI,QAAX;AADT;AAFgF,OAAxF,CAAL,CAMIC,IANJ,CAMSC,GAAG,IAAI;AACT,YAAGA,GAAG,CAACE,MAAJ,KAAe,GAAlB,EAAsB;AACrB;AACA,eAAKkC,UAAL;AACG,eAAKjC,QAAL,CAAckC,SAAS,KAAK;AAAC9C,YAAAA,IAAI,EAAE,EAAC,GAAG8C,SAAS,CAAC9C,IAAd;AAAoB+C,cAAAA,MAAM,EAAE;AAA5B;AAAP,WAAL,CAAvB;AACH;AACJ,OAZJ;AAaD,KAnI8B;;AAAA,SAqI/BC,UArI+B,GAqIlB,MAAK;AAElB9C,MAAAA,KAAK,CAAE,GAAE,KAAKC,KAAL,CAAWC,MAAO,6BAA4B,KAAKf,KAAL,CAAWW,IAAX,CAAgBqB,QAAS,0CAA3E,EAAuH;AACxHhB,QAAAA,MAAM,EAAE,KADgH;AAExHC,QAAAA,OAAO,EAAE;AACR,2BAAiB,KAAKH,KAAL,CAAWI,QAAX;AADT;AAF+G,OAAvH,CAAL,CAMIC,IANJ,CAMSC,GAAG,IAAI;AACT,YAAGA,GAAG,CAACE,MAAJ,KAAe,GAAlB,EAAsB;AACnB;AACA,eAAKkC,UAAL;AACC,eAAKjC,QAAL,CAAckC,SAAS,KAAK;AAAC9C,YAAAA,IAAI,EAAE,EAAC,GAAG8C,SAAS,CAAC9C,IAAd;AAAoB+C,cAAAA,MAAM,EAAE;AAA5B;AAAP,WAAL,CAAvB;AACH;AACJ,OAZJ;AAaD,KApJgC;;AAAA,SAsJjCF,UAtJiC,GAsJpB,MAAK;AACd,YAAMI,GAAG,GAAGX,QAAQ,CAACY,aAAT,CAAuB,iBAAvB,CAAZ;AACA,YAAMC,GAAG,GAAGb,QAAQ,CAACY,aAAT,CAAuB,YAAvB,CAAZ;AACAC,MAAAA,GAAG,CAACX,SAAJ,CAAcY,MAAd,CAAqB,MAArB;AACAH,MAAAA,GAAG,CAACT,SAAJ,CAAcY,MAAd,CAAqB,MAArB;AACAH,MAAAA,GAAG,CAACT,SAAJ,CAAcY,MAAd,CAAqB,MAArB;AACAH,MAAAA,GAAG,CAACT,SAAJ,CAAcY,MAAd,CAAqB,gBAArB;AACD,KA7J8B;;AAAA,SAgKjCC,SAhKiC,GAgKpBtD,MAAD,IAAW;AACnB,WAAKa,QAAL,CAAc;AAACb,QAAAA,MAAM,EAAEA;AAAT,OAAd;AACH,KAlKgC;AAAA;;AAe7BuD,EAAAA,iBAAiB,GAAE;AACf,UAAMC,GAAG,GAAG,KAAKpD,KAAL,CAAWqD,QAAX,CAAoBC,QAAhC;AACA,UAAMC,KAAK,GAAGH,GAAG,CAACI,KAAJ,CAAU,GAAV,CAAd;AACA,UAAMC,GAAG,GAAGF,KAAK,CAACA,KAAK,CAACG,MAAN,GAAa,CAAd,CAAjB;AAEA,SAAK5D,SAAL,CAAe2D,GAAf;AACA,SAAKhD,QAAL,CAAc;AAACtB,MAAAA,EAAE,EAAEsE;AAAL,KAAd;AACH;;AA8IDE,EAAAA,MAAM,GAAG;AACL,UAAM;AAAC9D,MAAAA,IAAD;AAAOH,MAAAA,QAAP;AAAiBC,MAAAA,YAAjB;AAA+BN,MAAAA,SAA/B;AAA0CC,MAAAA,QAA1C;AAAoDE,MAAAA,KAApD;AAA2DD,MAAAA,OAA3D;AAAoEqB,MAAAA,OAApE;AAA6ExB,MAAAA,KAA7E;AAAoFK,MAAAA;AAApF,QAAiG,KAAKP,KAA5G;;AACA,QAAGW,IAAI,KAAK,IAAT,IAAiBH,QAAQ,KAAG,KAA/B,EAAqC;AACjC,0BAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAR;AACH,KAFD,MAGK,IAAGA,QAAQ,KAAK,IAAhB,EAAqB;AACtB,0BACI;AAAA,+BACI;AAAA,iCAAK;AAAA,sBAAIC;AAAJ;AAAA;AAAA;AAAA;AAAA;AAAL;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cADJ;AAKH;;AACD,wBACI;AAAS,MAAA,SAAS,EAAC,EAAnB;AAAA,8BACI;AAAA,yCAAS;AAAA,0BAAKE,IAAI,CAACqB,QAAV;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAT;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA,+BACI;AAAK,UAAA,SAAS,EAAC,WAAf;AAAA,kCACA;AAAK,YAAA,SAAS,EAAC,iCAAf;AAAA,oCACI;AAAK,cAAA,SAAS,EAAC,+BAAf;AAAA,qCACA;AAAM,gBAAA,SAAS,EAAC,kBAAhB;AAAmC,gBAAA,EAAE,EAAC,sBAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAII;AAAO,cAAA,IAAI,EAAC,MAAZ;AAAmB,cAAA,IAAI,EAAC,WAAxB;AAAoC,cAAA,SAAS,EAAC,cAA9C;AAA6D,cAAA,KAAK,EAAE7B,SAApE;AAA+E,4BAAW,OAA1F;AAAkG,cAAA,QAAQ,EAAE,KAAKqC,WAAjH;AAA8H,kCAAiB;AAA/I;AAAA;AAAA;AAAA;AAAA,oBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBADA,eAQA;AAAK,YAAA,SAAS,EAAC,iCAAf;AAAA,oCACI;AAAK,cAAA,SAAS,EAAC,+BAAf;AAAA,qCACA;AAAM,gBAAA,SAAS,EAAC,kBAAhB;AAAmC,gBAAA,EAAE,EAAC,sBAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAII;AAAO,cAAA,IAAI,EAAC,MAAZ;AAAmB,cAAA,IAAI,EAAC,UAAxB;AAAmC,cAAA,SAAS,EAAC,cAA7C;AAA4D,cAAA,KAAK,EAAEpC,QAAnE;AAA6E,4BAAW,OAAxF;AAAgG,cAAA,QAAQ,EAAE,KAAKoC,WAA/G;AAA4H,kCAAiB;AAA7I;AAAA;AAAA;AAAA;AAAA,oBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBARA,eAeA;AAAK,YAAA,SAAS,EAAC,iCAAf;AAAA,oCACI;AAAK,cAAA,SAAS,EAAC,+BAAf;AAAA,qCACA;AAAM,gBAAA,SAAS,EAAC,kBAAhB;AAAmC,gBAAA,EAAE,EAAC,sBAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAII;AAAO,cAAA,IAAI,EAAC,MAAZ;AAAmB,cAAA,IAAI,EAAC,SAAxB;AAAkC,cAAA,SAAS,EAAC,cAA5C;AAA2D,cAAA,KAAK,EAAEnC,OAAlE;AAA2E,4BAAW,OAAtF;AAA8F,cAAA,QAAQ,EAAE,KAAKmC,WAA7G;AAA0H,kCAAiB;AAA3I;AAAA;AAAA;AAAA;AAAA,oBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAfA,eAsBA;AAAK,YAAA,SAAS,EAAC,iCAAf;AAAA,oCACI;AAAK,cAAA,SAAS,EAAC,+BAAf;AAAA,qCACA;AAAM,gBAAA,SAAS,EAAC,kBAAhB;AAAmC,gBAAA,EAAE,EAAC,sBAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAII;AAAO,cAAA,IAAI,EAAC,MAAZ;AAAmB,cAAA,IAAI,EAAC,OAAxB;AAAgC,cAAA,SAAS,EAAC,cAA1C;AAAyD,cAAA,KAAK,EAAEtC,KAAhE;AAAuE,4BAAW,OAAlF;AAA0F,cAAA,QAAQ,EAAE,KAAKsC,WAAzG;AAAsH,kCAAiB;AAAvI;AAAA;AAAA;AAAA;AAAA,oBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAtBA,eA6BA;AAAK,YAAA,SAAS,EAAC,iCAAf;AAAA,oCACI;AAAK,cAAA,SAAS,EAAC,+BAAf;AAAA,qCACA;AAAM,gBAAA,SAAS,EAAC,kBAAhB;AAAmC,gBAAA,EAAE,EAAC,sBAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAII;AAAO,cAAA,IAAI,EAAC,MAAZ;AAAmB,cAAA,IAAI,EAAC,OAAxB;AAAgC,cAAA,SAAS,EAAC,cAA1C;AAAyD,cAAA,KAAK,EAAElC,KAAhE;AAAuE,4BAAW,OAAlF;AAA0F,cAAA,QAAQ,EAAE,KAAKkC,WAAzG;AAAsH,kCAAiB;AAAvI;AAAA;AAAA;AAAA;AAAA,oBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBA7BA,eAoCA;AAAK,YAAA,SAAS,EAAC,iCAAf;AAAA,oCACI;AAAK,cAAA,SAAS,EAAC,+BAAf;AAAA,qCACA;AAAM,gBAAA,SAAS,EAAC,kBAAhB;AAAmC,gBAAA,EAAE,EAAC,sBAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAII;AAAO,cAAA,IAAI,EAAC,MAAZ;AAAmB,cAAA,IAAI,EAAC,SAAxB;AAAkC,cAAA,SAAS,EAAC,cAA5C;AAA2D,cAAA,KAAK,EAAEd,OAAlE;AAA2E,4BAAW,OAAtF;AAA8F,cAAA,QAAQ,EAAE,KAAKc,WAA7G;AAA0H,kCAAiB;AAA3I;AAAA;AAAA;AAAA;AAAA,oBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBApCA,eA2CA;AAAQ,YAAA,IAAI,EAAC,QAAb;AAAsB,YAAA,SAAS,EAAC,2BAAhC;AAA4D,YAAA,OAAO,EAAE,MAAM,KAAKa,MAAL,EAA3E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBA3CA,eA4CA;AAAQ,YAAA,IAAI,EAAC,QAAb;AAAsB,YAAA,SAAS,EAAC,sBAAhC;AAAuD,8BAAe,OAAtE;AAA8E,8BAAe,YAA7F;AAA0G,YAAA,OAAO,EAAE,MAAM,KAAKW,SAAL,CAAe,KAAKpC,IAApB,CAAzH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBA5CA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAFJ,eAmDI;AAAI,QAAA,SAAS,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAnDJ,eAoDI;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA,+BACI;AAAK,UAAA,SAAS,EAAC,WAAf;AAAA,kCACA;AAAO,YAAA,GAAG,EAAC,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADA,eAEI;AAAK,YAAA,SAAS,EAAC,kBAAf;AAAA,oCACA;AAAK,cAAA,SAAS,EAAC,qBAAf;AAAA,qCACA;AAAQ,gBAAA,SAAS,EAAC,iBAAlB;AAAoC,gBAAA,IAAI,EAAC,QAAzC;AAAkD,gBAAA,OAAO,EAAE,MAAM,KAAKS,aAAL,EAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,oBADA,eAIA;AAAO,cAAA,IAAI,EAAC,QAAZ;AAAqB,cAAA,IAAI,EAAC,WAA1B;AAAsC,cAAA,SAAS,EAAC,cAAhD;AAA+D,cAAA,KAAK,EAAE9B,SAAtE;AAAiF,cAAA,QAAQ,EAAE,KAAKiC,WAAhG;AAA6G,cAAA,EAAE,EAAC,WAAhH;AAA4H,kCAAiB;AAA7I;AAAA;AAAA;AAAA;AAAA,oBAJA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ,eASI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBATJ,eAUI;AAAA,sBAEA7B,IAAI,CAAC+C,MAAL,gBACI;AAAQ,cAAA,IAAI,EAAC,QAAb;AAAsB,cAAA,SAAS,EAAC,iBAAhC;AAAkD,gCAAe,OAAjE;AAAyE,gCAAe,YAAxF;AAAqG,cAAA,OAAO,EAAE,MAAM,KAAKM,SAAL,CAAe,KAAKT,QAApB,CAApH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,gBAGI;AAAQ,cAAA,IAAI,EAAC,QAAb;AAAsB,cAAA,SAAS,EAAC,gBAAhC;AAAiD,gCAAe,OAAhE;AAAwE,gCAAe,YAAvF;AAAoG,cAAA,OAAO,EAAE,MAAM,KAAKS,SAAL,CAAe,KAAKL,UAApB,CAAnH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AALJ;AAAA;AAAA;AAAA;AAAA,kBAVJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cApDJ,EAyEK7D,YAAY,CAAC,KAAKE,KAAL,CAAWU,MAAZ,CAzEjB;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AA8EH;;AA9P4B;;AAiQjC,oBAAeb,UAAU,CAACE,QAAD,CAAzB","sourcesContent":["import React, { Component } from 'react';\nimport { NavLink} from 'react-router-dom';\nimport { withRouter } from 'react-router-dom'\nimport Confirmation from '../utils/Confirmation'\n\nclass EditUser extends Component {\n    state = {\n        id: \"\",\n        email: \"\",\n        firstName: \"\",\n        lastName: \"\",\n        address: \"\",\n        phone: \"\",\n        bookLimit: 3,\n        notFound: false,\n        errorMessage: \"\",\n        action: null,\n        user: null\n     }\n\n    componentDidMount(){\n        const url = this.props.location.pathname;\n        const array = url.split('/');\n        const _id = array[array.length-1];\n\n        this.fetchUser(_id);\n        this.setState({id: _id});\n    }\n     \n\n    fetchUser= (id) =>{\n        fetch(this.props.prefix + `/api/library/admins/users/${id}`, {\n           method: 'GET',\n           headers: {\"Content-Type\": \"application/json\", \"Authorization\": this.props.getToken()}\n          })\n        .then(res => res.json())\n        .then(res => {\n            \n            if(res.status === 404){\n                this.setState({notFound: true, errorMessage: res.message});\n            }\n            else if (res.status === 403){\n                this.setState({notFound: true, errorMessage: \"You have to login to administrator account to get access to this resource\"})\n            }\n            else{\n                this.setState({user: res, notFound: false, ready: true})\n                this.setState({id: res.id, email: res.email, comment: res.comment, firstName: res.firstName, lastName: res.lastName, address: res.address, phone: res.phone, bookLimit: res.maxBooks});\n            }       \n        })\n      }\n\n  edit = () => {\n    console.log(\"here\");\n    console.log(this.getEditUserObject());\n\n    fetch(`${this.props.prefix}/api/library/admins/users/edit/${this.state.user.username}`,  {\n       method: 'POST',\n       body: JSON.stringify(this.getEditUserObject()),\n       headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": this.props.getToken()\n    }\n      })\n      .then(res => {\n          if(res.status === 200){\n              alert(\"Data changed successfully\");\n          }\n      });\n  }\n\n  increaseLimit = () =>{\n    fetch(`${this.props.prefix}/api/library/admins/users/${this.state.user.username}/bookLimit`,  {\n        method: 'POST',\n        body: JSON.stringify(this.getEditLimitObject()),\n        headers: {\n         \"Content-Type\": \"application/json\",\n         \"Authorization\": this.props.getToken()\n     }\n       })\n       .then(res => {\n           if(res.status === 200){\n               alert(\"Limit changed successfully\");\n           }\n       });\n  }\n\n  getEditUserObject = () =>{\n    let firstName = this.state.firstName === this.state.user.firstName? \"\" : this.state.firstName;\n    let lastName = this.state.lastName === this.state.user.lastName? \"\" : this.state.lastName;\n    let phone = this.state.phone === this.state.user.phone? \"\" : this.state.phone;\n    let address = this.state.address === this.state.user.address? \"\" : this.state.address;\n    let email = this.state.email === this.state.user.email? \"\" : this.state.email;\n    let comment = this.state.comment === this.state.user.comment? \"\" : this.state.comment;\n\n    return {firstName, lastName, phone, address, email, comment};\n  }\n\n  getEditLimitObject = () =>{\n    let limit = this.state.bookLimit < 1 ? 3 : this.state.bookLimit\n\n    return {limit};\n  }\n\n  dataHandler = (e) =>{\n    this.setState({[e.target.name]: e.target.value});\n}   \n\n  filterByUsername = (e) =>{\n    e.preventDefault();\n    this.fetchBorrow(0, 10, this.state.username);\n  }\n\n   myFunction = () => {\n    document.getElementById(\"myDropdown\").classList.toggle(\"show\");\n  }\n\n  goBack = () => {\n      this.props.history.goBack();\n    //this.props.history.push('/users');\n  }\n\n  activate = () =>{\n\n    fetch(`${this.props.prefix}/api/library/admins/users/${this.state.user.username}/activate`,  {\n        method: 'GET',\n        headers: {\n         \"Authorization\": this.props.getToken()\n     }\n       })\n       .then(res => {\n           if(res.status === 200){\n            //    alert(\"User account activated\");\n            this.closePopup();\n               this.setState(prevState => ({user: {...prevState.user, banned: false}}));\n           }\n       });\n  }\n\n  deactivate = () =>{\n   \n  fetch(`${this.props.prefix}/api/library/admins/users/${this.state.user.username}/deactivate/User banned by administrator`,  {\n      method: 'GET',\n      headers: {\n       \"Authorization\": this.props.getToken()\n   }\n     })\n     .then(res => {\n         if(res.status === 200){\n            //  alert(\"User account deactivated\");\n            this.closePopup();\n             this.setState(prevState => ({user: {...prevState.user, banned: true}}));\n         }\n     });\n}\n\nclosePopup = () =>{\n    const el1 = document.querySelector('.modal-backdrop')\n    const el2 = document.querySelector('#confirmId')\n    el2.classList.remove('show');\n    el1.classList.remove('show');\n    el1.classList.remove('fade');\n    el1.classList.remove('modal-backdrop');\n  }\n\n\nsetAction = (action) =>{\n    this.setState({action: action});\n}\n\n    render() { \n        const {user, notFound, errorMessage, firstName, lastName, phone, address, comment, email, bookLimit} = this.state;\n        if(user === null && notFound===false){\n            return (<div>Loading...</div>)\n        }\n        else if(notFound === true){\n            return (\n                <section>\n                    <div><b>{errorMessage}</b></div> \n                </section>\n            )\n        }\n        return ( \n            <section className=\"\">\n                <h3>Edit <b> {user.username} </b> account</h3>   \n                <div className=\"card mt-1\">\n                    <div className=\"card-body\">      \n                    <div className=\"input-group input-group-sm mb-3\">\n                        <div className=\"input-group-prepend edit-icon\">\n                        <span className=\"input-group-text\" id=\"inputGroup-sizing-sm\">First name</span>\n                        </div>\n                        <input type=\"text\" name=\"firstName\" className=\"form-control\" value={firstName} aria-label=\"Small\" onChange={this.dataHandler} aria-describedby=\"inputGroup-sizing-sm\"/>\n                    </div>\n\n                    <div className=\"input-group input-group-sm mb-3\">\n                        <div className=\"input-group-prepend edit-icon\">\n                        <span className=\"input-group-text\" id=\"inputGroup-sizing-sm\">Last name</span>\n                        </div>\n                        <input type=\"text\" name=\"lastName\" className=\"form-control\" value={lastName} aria-label=\"Small\" onChange={this.dataHandler} aria-describedby=\"inputGroup-sizing-sm\"/>\n                    </div>\n\n                    <div className=\"input-group input-group-sm mb-3\">\n                        <div className=\"input-group-prepend edit-icon\">\n                        <span className=\"input-group-text\" id=\"inputGroup-sizing-sm\">Address</span>\n                        </div>\n                        <input type=\"text\" name=\"address\" className=\"form-control\" value={address} aria-label=\"Small\" onChange={this.dataHandler} aria-describedby=\"inputGroup-sizing-sm\"/>\n                    </div>\n\n                    <div className=\"input-group input-group-sm mb-3\">\n                        <div className=\"input-group-prepend edit-icon\">\n                        <span className=\"input-group-text\" id=\"inputGroup-sizing-sm\">Email</span>\n                        </div>\n                        <input type=\"text\" name=\"email\" className=\"form-control\" value={email} aria-label=\"Small\" onChange={this.dataHandler} aria-describedby=\"inputGroup-sizing-sm\"/>\n                    </div>\n\n                    <div className=\"input-group input-group-sm mb-3\">\n                        <div className=\"input-group-prepend edit-icon\">\n                        <span className=\"input-group-text\" id=\"inputGroup-sizing-sm\">Phone</span>\n                        </div>\n                        <input type=\"text\" name=\"phone\" className=\"form-control\" value={phone} aria-label=\"Small\" onChange={this.dataHandler} aria-describedby=\"inputGroup-sizing-sm\"/>\n                    </div>\n\n                    <div className=\"input-group input-group-sm mb-3\">\n                        <div className=\"input-group-prepend edit-icon\">\n                        <span className=\"input-group-text\" id=\"inputGroup-sizing-sm\">Comment</span>\n                        </div>\n                        <input type=\"text\" name=\"comment\" className=\"form-control\" value={comment} aria-label=\"Small\" onChange={this.dataHandler} aria-describedby=\"inputGroup-sizing-sm\"/>\n                    </div>\n\n                    <button type=\"button\" className=\"btn btn-outline-secondary\" onClick={() => this.goBack()}>Back</button>\n                    <button type=\"button\" className=\"btn btn-success ms-2\" data-bs-toggle=\"modal\" data-bs-target=\"#confirmId\" onClick={() => this.setAction(this.edit)}>Save</button>\n                    </div>  \n                </div>\n\n                <h3 className=\"mt-5\">Advanced</h3>\n                <div className=\"card mt-1\">\n                    <div className=\"card-body\">\n                    <label for=\"basic-url\">Books limit</label>\n                        <div className=\"input-group mb-3\">\n                        <div className=\"input-group-prepend\">\n                        <button className=\"btn btn-success\" type=\"button\" onClick={() => this.increaseLimit()}>Confirm</button>\n                        </div>\n                        <input type=\"number\" name=\"bookLimit\" className=\"form-control\" value={bookLimit} onChange={this.dataHandler} id=\"basic-url\" aria-describedby=\"basic-addon3\"/>\n                        </div>\n\n                        <label>Is active</label>\n                        <div>\n                        {\n                        user.banned? \n                            <button type=\"button\" className=\"btn btn-warning\" data-bs-toggle=\"modal\" data-bs-target=\"#confirmId\" onClick={() => this.setAction(this.activate)} >Activate account</button>\n                            :\n                            <button type=\"button\" className=\"btn btn-danger\" data-bs-toggle=\"modal\" data-bs-target=\"#confirmId\" onClick={() => this.setAction(this.deactivate)}>Deactivate account</button>\n                        }\n                        </div>\n                    </div>\n                </div>\n                {Confirmation(this.state.action)}\n                \n            </section>\n         );\n    }\n}\n \nexport default withRouter(EditUser);"]},"metadata":{},"sourceType":"module"}